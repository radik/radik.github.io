Title: Семь правил использования сторонних библиотек
Date: 2013-01-15 21:42:00
Author: Radik Fattakhov
Category: Blog
Tags: javacodegeeks, translate, умные мысли, разработка
Slug: 2013-01-15-sem-pravil-ispolzovaniia-storonnikh-bibliotek

**Disclaimer**: Это перевод [статьи с JavaCodeGeeks](http://www.javacodegeeks.com/2013/01/seven-tips-for-using-third-party-libraries.html "Seven Tips For Using Third-Party Libraries")<span>.
Перевод сделан исключительно из эгоистических соображений для повышения
собственного уровня грамотности. Мое мнение не обязательно совпадает с
мнением автора.

**Использование библиотек может быть плачевным**

Недавно я обнаружил, что [библиотека, которую мы используем](http://openid.net/), не всегда отвечает нашим требованиям. Пошел посмотреть обновления и обнаружил, что она больше не
поддерживается. Поэтому нашел альтернативу и, когда попытался прикрутить
ее, оказалось, что классы старой библиотеки использованы по всему коду.

Мораль этой короткой истории - многое может пойти не так, когда вы
используете сторонние библиотеки. Далее мы рассмотрим как правильно
использовать библиотеки.  В основном я буду иметь ввиду open source
библиотеки, но те же самые правила применимы и к коммерческим продуктам.

<!-- more -->
**1. Используйте только активно поддерживаемые библиотеки**

Обратите внимание на такие вещи как - дата последнего релиза, число
разработчиков и наличие организации-спонсора.

**2. Используйте библиотеки с подходящей лицензией**

Какая именно лицензия подходит вам зависит от того, что вы делаете.
Например, если  делаете и распространяете коммерческие приложения с
закрытым исходным кодом, вы не должны использовать библиотеки,
распространяемые только под
лицензией [GPL](http://www.gnu.org/licenses/gpl.html "GNU General Public License").

**3. Ограничивайте использование библиотеки в вашем коде**

Используйте паттерн [Facade](http://en.wikipedia.org/wiki/Facade_pattern), чтобы
обернуть библиотеку в ваш интерфейс. У этого есть свои преимущества:

-   Это позволяет быстро заменить одну библиотеку другой, что может понадобиться в будущем
-   Это задокументирует ту часть библиотеки, которую вы действительно используете
-   Это позволит в правильном месте расширить функционал, недостающий в сторонней библиотеке

**4. Используйте последнюю версию**

Многие разработчики придерживаются правила "работает - не трогай".
Однако так можно пропустить некоторые ошибки. Например, многие
библиотеки содержат уязвимости в безопасности, которые со временем
исправляются в более поздних версиях. Вы не заметите этой проблемы до
тех пор, пока ваше приложение не взломают.

**5. Пишите тесты для обратной совместимости**

Если вы собираетесь регулярно обновлять используемую библиотеку, будет
лучше, если вы будете знать, сломали ли авторы что-нибудь в новом
релизе. Поэтому вам необходимо написать тесты, проверяющие необходимую
вам функциональность. В качестве бонуса будет то, что эти тесты
задокументируют то, как надо использовать библиотеку.

**6. Вы должны знать используемую библиотеку**

Вы всегда должны быть готовы рассказать какие библиотеки вы используете
в данный момент и какие у них лицензии. Никогда нельзя предугадать,
когда кто-нибудь из команды позвонит вам и скажет о критической
уязвимости в определенной версии библиотеки, либо когда юридический
отдел решит запретить использовать определенную лицензию.

**7. Держите все под контролем**

Ваше приложение предоставляет определенную функциональность вашим
пользователям. Их не волнует то, как вы создаете эту функциональность -
сами или при помощи сторонних библиотек. По крайней мере их не должно
это волновать. Когда возникают проблемы в вашем коде, вы должны быть
способны их исправить.

Поэтому подумайте о том, как вы это собираетесь делать для используемых
библиотек. Быстро ли их авторы реагируют на сообщения об ошибках? Есть
ли у вас доступ к коду? Готовы ли разработчики принимать ваши патчи?
Позволяет ли лицензия изменять код для закрытого использования?


